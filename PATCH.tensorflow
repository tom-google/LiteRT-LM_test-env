--- third_party/xla/third_party/protobuf/protobuf.patch	2025-08-18 10:33:05
+++ third_party/xla/third_party/protobuf/protobuf.patch	2025-08-18 15:34:33
@@ -1,3 +1,36 @@
+diff --git a/src/google/protobuf/compiler/java/BUILD.bazel b/src/google/protobuf/compiler/java/BUILD.bazel
+--- a/src/google/protobuf/compiler/java/BUILD.bazel	2025-05-28 09:52:58
++++ b/src/google/protobuf/compiler/java/BUILD.bazel	2025-08-18 17:40:44
+@@ -48,6 +48,7 @@
+         "context.h",
+         "doc_comment.h",
+         "generator.h",
++        "field_common.h",
+         "helpers.h",
+         "name_resolver.h",
+         "names.h",
+diff --git a/src/google/protobuf/compiler/java/context.h b/src/google/protobuf/compiler/java/context.h
+--- a/src/google/protobuf/compiler/java/context.h
++++ b/src/google/protobuf/compiler/java/context.h
+@@ -12,6 +12,7 @@
+ #include <vector>
+ 
+ #include "absl/container/flat_hash_map.h"
++#include "google/protobuf/compiler/java/field_common.h"
+ #include "google/protobuf/compiler/java/helpers.h"
+ #include "google/protobuf/compiler/java/options.h"
+ #include "google/protobuf/port.h"
+diff --git a/src/google/protobuf/compiler/java/message_serialization.h b/src/google/protobuf/compiler/java/message_serialization.h
+--- a/src/google/protobuf/compiler/java/message_serialization.h
++++ b/src/google/protobuf/compiler/java/message_serialization.h
+@@ -13,6 +13,7 @@
+ #include <vector>
+ 
+ #include "absl/types/span.h"
++#include "google/protobuf/compiler/java/field_common.h"
+ #include "google/protobuf/compiler/java/generator_common.h"
+ #include "google/protobuf/descriptor.h"
+ #include "google/protobuf/io/printer.h"
 diff --git a/BUILD.bazel b/BUILD.bazel
 --- a/BUILD.bazel
 +++ b/BUILD.bazel
+diff --git a/third_party/kissfft/kissfft.BUILD b/third_party/kissfft/kissfft.BUILD
--- third_party/kissfft/kissfft.BUILD
+++ third_party/kissfft/kissfft.BUILD
@@ -28,3 +28,22 @@ cc_library(
         "-DFIXED_POINT=16",
     ],
 )
+cc_library(
+    name = "kissfftr",
+    srcs = [
+        "kfc.c",
+        "kiss_fft.c",
+        "kiss_fftnd.c",
+        "kiss_fftndr.c",
+        "kiss_fftr.c",
+    ],
+    hdrs = [
+        "_kiss_fft_guts.h",
+        "kfc.h",
+        "kiss_fft.h",
+        "kiss_fft_log.h",
+        "kiss_fftnd.h",
+        "kiss_fftndr.h",
+        "kiss_fftr.h",
+    ],
+)
