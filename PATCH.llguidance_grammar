--- src/earley/grammar.rs
+++ src/earley/grammar.rs
@@ -1325,4 +1325,4 @@
                 outp.rhs_params.push(ParamExpr::Null);
             }
-            while !outp.rhs_elements.len().is_multiple_of(1 << RULE_SHIFT) {
+            while outp.rhs_elements.len() % (1 << RULE_SHIFT) != 0 {
                 outp.rhs_elements.push(CSymIdx::NULL);
                 outp.rhs_params.push(ParamExpr::Null);
